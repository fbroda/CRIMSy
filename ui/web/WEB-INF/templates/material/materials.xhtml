<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~     Leibniz Bioactives Cloud
  ~     Copyright 2017 Leibniz-Institut f. Pflanzenbiochemie
  ~
  ~     Licensed under the Apache License, Version 2.0 (the "License");
  ~     you may not use this file except in compliance with the License.
  ~     You may obtain a copy of the License at
  ~
  ~         http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~     Unless required by applicable law or agreed to in writing, software
  ~     distributed under the License is distributed on an "AS IS" BASIS,
  ~     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~     See the License for the specific language governing permissions and
  ~     limitations under the License.
  ~
  ~
  ~
-->

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:body>
        <b:form 
            id="materialForm">
            <b:container>
                <b:row>
                    <b:column span="1">
                        <b:commandButton
                            action="#{materialOverviewBean.actionCreateNewMaterial()}"
                            value="#{msgs.materials_createNew}"
                            />
                    </b:column>
                </b:row>
            </b:container>
            <b:dataTable
                paginated="false"
                value="#{materialOverviewBean.readableMaterials}"
                searching="false"
                var="material">
                <b:dataTableColumn
                    value="#{material.id}">
                </b:dataTableColumn>
                <b:dataTableColumn
                    label="#{msgs.materialOverview_tableheader_name}">
                    <h:outputText
                        escape="false"
                        value="#{material.getPrintableNames()}"/>
                </b:dataTableColumn>
                <b:dataTableColumn
                    label="#{msgs.materialOverview_tableheader_type}"
                    value="#{material.type}">
                </b:dataTableColumn>
                <b:dataTableColumn
                    styleClass="div-container-hazard"
                    label="#{msgs.materialOverview_tableheader_hazards}">
                    <ui:fragment rendered="#{materialOverviewBean.isDetailSubComponentVisisble('BIOMATERIAL', material)}">
                        <ui:insert name="biomaterialPanel">
                            <ui:include src="/WEB-INF/templates/material/components/detail/biodata.xhtml">
                                <ui:param name="material" value="#{material}" />
                            </ui:include>
                        </ui:insert>
                    </ui:fragment>
                    <ui:fragment rendered="#{materialOverviewBean.isDetailSubComponentVisisble('STRUCTURE', material)}">
                        <ui:insert name="structurePanel">
                            <ui:include src="/WEB-INF/templates/material/components/detail/structure.xhtml">
                                <ui:param name="material" value="#{material}" />
                            </ui:include>
                        </ui:insert>
                    </ui:fragment>
                </b:dataTableColumn>
                <b:dataTableColumn
                    label="#{msgs.materialOverview_tableheader_actions}">
                    <b:commandButton style="padding: 0 4px;"
                                     icon="pencil"
                                     look="link"
                                     type="submit"
                                     ajax="false"
                                     action="#{materialOverviewBean.actionEditMaterial(material)}"
                                     oncomplete="addStateSaveBehavior()"
                                     tooltip="#{msgs.materialOverview_actions_edit}"
                                     />
                    <b:commandButton style="padding: 0 4px;"
                                     icon-awesome="fa-eyedropper"
                                     look="link"
                                     type="submit"
                                     ajax="false"
                                     action="#{materialOverviewBean.actionCreateNewItem(material)}"
                                     tooltip="#{msgs.materialOverview_actions_createItem}"
                                     />
                    <b:commandButton style="padding: 0 4px;"
                                     icon="glyphicon glyphicon-user"
                                     look="link"
                                     ajax="true"
                                     process="@this"
                                     type="button"
                                     disabled="true"
                                     tooltip="#{msgs.materialOverview_actions_changeRights}"
                                     />
                    <b:commandButton style="padding: 0 4px;"
                                     icon="trash"
                                     look="link"
                                     type="button"
                                     ajax="true"
                                     update="@form"
                                     onclick="ajax:materialOverviewBean.actionDeactivateMaterial(material);"
                                     tooltip="#{msgs.materialOverview_actions_deactivate}"
                                     />
                </b:dataTableColumn>
            </b:dataTable>
        </b:form>
    </h:body>

</html>
